using System;
using System.Collections.Generic;

namespace GradesourceUploader
{
	internal sealed class MainClass
	{
		public static void Main(string[] args)
		{
			#region GradeSource IDs
			// TODO this should really be extracted from GS itself
			var gradesourceIds = new Dictionary<string, int>()
			{
				{ "A10318231", 468350 },
				{ "A10236505", 468360 },
				{ "A10288234", 470578 },
				{ "A08724499", 468373 },
				{ "A50041746", 468379 },
				{ "A08254251", 468382 },
				{ "A09022988", 468390 },
				{ "A09424825", 468397 },
				{ "A50052654", 468399 },
				{ "A96059416", 468400 },
				{ "A10251935", 468404 },
				{ "A09240490", 468429 },
				{ "A09419498", 468435 },
				{ "A09542034", 468445 },
				{ "A09251221", 468446 },
				{ "A09427983", 468449 },
				{ "A09415287", 468455 },
				{ "A96073762", 468462 },
				{ "A09337078", 468465 },
				{ "A09203243", 468467 },
				{ "A08924303", 468472 },
				{ "A09190445", 468476 },
				{ "A09348706", 468480 },
				{ "A09463490", 468497 },
				{ "A10327235", 468498 },
				{ "A97430999", 468502 },
				{ "A08791819", 468504 },
				{ "A95140475", 468508 },
				{ "A10283416", 468510 },
				{ "A08356511", 468520 },
				{ "A09565036", 468528 },
				{ "A09026724", 468555 },
				{ "A08976900", 468566 },
				{ "A08987174", 468567 },
				{ "U06000321", 470579 },
				{ "A08758082", 468571 },
				{ "A09241553", 468573 },
				{ "A07984333", 468580 },
				{ "U06109401", 470580 },
				{ "A08789672", 468582 },
				{ "A08307906", 468595 },
				{ "A08937307", 468599 },
				{ "U06008712", 470581 },
				{ "A08091426", 468610 },
				{ "A09902766", 468628 },
				{ "A10288170", 468647 },
				{ "A09909447", 468652 },
				{ "A10291827", 468667 },
				{ "A08685281", 468669 },
				{ "A09192542", 468682 },
				{ "A95164406", 468687 },
				{ "A09479894", 468688 },
				{ "A08858934", 468699 },
				{ "A97403941", 468702 },
				{ "A09417636", 468720 },
				{ "A10183432", 468719 },
				{ "A08988750", 468727 },
				{ "A09014944", 468730 },
				{ "A09248694", 468733 },
				{ "A95186602", 468751 },
				{ "A09245112", 468754 },
				{ "A07496035", 468761 },
				{ "A08624064", 468763 },
				{ "A10242447", 468772 },
				{ "A09480631", 468781 },
				{ "A09175231", 468784 },
				{ "A08483886", 470582 },
				{ "A10315156", 468813 },
				{ "A09275977", 468815 },
				{ "A09511551", 468821 },
				{ "A50053940", 468823 },
				{ "A09219110", 468829 },
				{ "A09284392", 468834 },
				{ "A09185041", 468843 },
				{ "A10315167", 468847 },
				{ "A10282239", 468855 },
				{ "A09365528", 468857 },
				{ "A09490347", 468864 },
				{ "A08789304", 468867 },
				{ "A10294608", 468868 },
				{ "A09544208", 468871 },
				{ "A96034027", 470583 },
				{ "A07174050", 468879 },
				{ "A96419948", 470584 },
				{ "A09390905", 468896 },
				{ "A07891381", 468907 },
				{ "A09262448", 468908 },
				{ "A08713557", 468911 },
				{ "A08664083", 468917 },
				{ "A97418683", 468930 },
				{ "A08333211", 468938 },
				{ "A97405621", 468940 },
				{ "A95117642", 468945 },
				{ "A09553765", 468959 },
				{ "A07990635", 468969 },
				{ "A95142871", 468976 },
				{ "A09794248", 468979 },
				{ "A09533664", 468984 },
				{ "A08768563", 468992 },
				{ "A08572344", 468996 },
				{ "A09279741", 469001 },
				{ "A09914636", 469007 },
				{ "A10273751", 469017 },
				{ "A10290879", 469023 },
				{ "A08531289", 469025 },
				{ "A08755916", 469028 },
				{ "A50053906", 469033 },
				{ "A09639092", 469037 },
				{ "A09205307", 469047 },
				{ "A09760216", 469069 },
				{ "A96418056", 469075 },
				{ "A10259423", 469079 },
				{ "A10280499", 469081 },
				{ "A10254036", 470585 },
				{ "U06064411", 470586 },
				{ "A08183928", 469088 },
				{ "A97418467", 469096 },
				{ "A97406239", 469097 },
				{ "A09259574", 469104 },
				{ "A09209963", 469106 },
				{ "A09317839", 469119 },
				{ "A09299917", 469136 },
				{ "A09351462", 469140 },
				{ "A08424245", 469144 },
				{ "A09662312", 469146 },
				{ "A08240805", 469152 },
				{ "A09243929", 469157 },
				{ "A08992549", 470587 },
				{ "A09593894", 469182 },
				{ "A09516314", 469190 },
				{ "A08868171", 470588 },
				{ "A97414795", 469204 },
				{ "A09587578", 469210 },
				{ "A09359550", 469220 },
				{ "A09167013", 469223 },
				{ "A93053404", 469229 },
				{ "A08415510", 470589 },
				{ "A09462124", 469243 },
				{ "A09200738", 469256 },
				{ "A97411802", 470590 },
				{ "A09333830", 469277 },
				{ "A09020559", 469316 },
				{ "A09471149", 469328 },
				{ "U05977058", 470591 },
				{ "A08896887", 470592 },
				{ "A50056770", 469344 },
				{ "A08743761", 469354 },
				{ "A08864664", 469376 },
				{ "A10015299", 469379 },
				{ "A97428098", 469382 },
				{ "A09603028", 469386 },
				{ "A09364424", 469388 },
				{ "A10220966", 469395 },
				{ "A09229180", 469410 },
				{ "A09495090", 469412 },
				{ "U06008642", 470594 },
				{ "A08318287", 469429 },
				{ "A53009307", 469431 },
				{ "A09505990", 469434 },
				{ "A08194317", 470595 },
				{ "A97413956", 469447 },
				{ "A10243276", 469451 },
				{ "A96026267", 469461 },
				{ "A09321194", 469470 },
				{ "A09620543", 469475 },
				{ "A08691219", 469484 },
				{ "A09543821", 471385 },
				{ "A10290221", 470786 },
				{ "A08662145", 470787 },
				{ "U06000276", 470788 },
				{ "A09307173", 471226 },
				{ "A08565714", 471386 },
				{ "A10285312", 470593 }
			
			};
				
			#endregion GradeSource IDs
			
//			var allScoresById = CsvHelper.ExtractAllScoresById(args[0]);
//			PostAllScores(gradesourceIds, allScoresById, args[1]);
			var allScoresById = CsvHelper.ExtractAllScoresById(@"/home/skrstic/temp/grades.csv");
			PostAllScores(gradesourceIds, allScoresById, "*****");
		}
	
		private static void PostAllScores(IDictionary<string, int> gradesourceIds, IDictionary<string, IEnumerable<KeyValuePair<string, string>>> allScoresById, string password)
		{
			using (var session = new GradesourceSession(gradesourceIds, password))
			{
				var i = 0;
				foreach (var studentInfo in allScoresById)
				{
					session.PostStudentScores(studentInfo.Key, studentInfo.Value);
					Console.Out.WriteLine(++i + ": Processed student " + studentInfo.Key);
				}
			}
		}
	}
}
